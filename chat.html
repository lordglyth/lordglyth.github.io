<script>
    const workerURL = "https://long-queen-ad3e.r-p-gmafia.workers.dev/"; // Replace with your actual Cloudflare Worker URL

    function sendMessage() {
        let userMessage = document.getElementById("userInput").value;

        if (!userMessage.trim()) {
            document.getElementById("response").innerHTML = "<span class='error'>‚ö†Ô∏è Please enter a message.</span>";
            return;
        }

        document.getElementById("response").innerText = "‚è≥ Waiting for response...";

        fetch(workerURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                messages: [{ role: "user", content: userMessage }]
            })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP ${response.status} - ${response.statusText}`);
            }
            return response.json();
        })
        .then(data => {
            if (data.choices && data.choices.length > 0) {
                document.getElementById("response").innerText = "üó®Ô∏è ChatGPT: " + data.choices[0].message.content;
            } else {
                document.getElementById("response").innerHTML = "<span class='error'>‚ö†Ô∏è Error: No response from ChatGPT.</span>";
            }
        })
        .catch(error => {
            document.getElementById("response").innerHTML = `<span class='error'>‚ùå Error: ${error.message}</span>`;
            console.error("Error:", error);
        });
    }
</script>
